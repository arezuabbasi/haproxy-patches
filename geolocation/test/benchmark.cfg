defaults
	mode http
	option http-server-close
	timeout connect 5s
	timeout client 60s
	timeout server 60s
	timeout http-keep-alive 5s

listen original-acl-redirects :9001
	redirect location /a1 if { hdr_ip(X-Forwarded-For,-1) -f A1.subnets }
	redirect location /a2 if { hdr_ip(X-Forwarded-For,-1) -f A2.subnets }
	redirect location /ad if { hdr_ip(X-Forwarded-For,-1) -f AD.subnets }
	redirect location /ae if { hdr_ip(X-Forwarded-For,-1) -f AE.subnets }
	redirect location /af if { hdr_ip(X-Forwarded-For,-1) -f AF.subnets }
	redirect location /ag if { hdr_ip(X-Forwarded-For,-1) -f AG.subnets }
	redirect location /ai if { hdr_ip(X-Forwarded-For,-1) -f AI.subnets }
	redirect location /al if { hdr_ip(X-Forwarded-For,-1) -f AL.subnets }
	redirect location /am if { hdr_ip(X-Forwarded-For,-1) -f AM.subnets }
	redirect location /ao if { hdr_ip(X-Forwarded-For,-1) -f AO.subnets }
	redirect location /ap if { hdr_ip(X-Forwarded-For,-1) -f AP.subnets }
	redirect location /aq if { hdr_ip(X-Forwarded-For,-1) -f AQ.subnets }
	redirect location /ar if { hdr_ip(X-Forwarded-For,-1) -f AR.subnets }
	redirect location /as if { hdr_ip(X-Forwarded-For,-1) -f AS.subnets }
	redirect location /at if { hdr_ip(X-Forwarded-For,-1) -f AT.subnets }
	redirect location /au if { hdr_ip(X-Forwarded-For,-1) -f AU.subnets }
	redirect location /aw if { hdr_ip(X-Forwarded-For,-1) -f AW.subnets }
	redirect location /ax if { hdr_ip(X-Forwarded-For,-1) -f AX.subnets }
	redirect location /az if { hdr_ip(X-Forwarded-For,-1) -f AZ.subnets }
	redirect location /ba if { hdr_ip(X-Forwarded-For,-1) -f BA.subnets }
	redirect location /bb if { hdr_ip(X-Forwarded-For,-1) -f BB.subnets }
	redirect location /bd if { hdr_ip(X-Forwarded-For,-1) -f BD.subnets }
	redirect location /be if { hdr_ip(X-Forwarded-For,-1) -f BE.subnets }
	redirect location /bf if { hdr_ip(X-Forwarded-For,-1) -f BF.subnets }
	redirect location /bg if { hdr_ip(X-Forwarded-For,-1) -f BG.subnets }
	redirect location /bh if { hdr_ip(X-Forwarded-For,-1) -f BH.subnets }
	redirect location /bi if { hdr_ip(X-Forwarded-For,-1) -f BI.subnets }
	redirect location /bj if { hdr_ip(X-Forwarded-For,-1) -f BJ.subnets }
	redirect location /bl if { hdr_ip(X-Forwarded-For,-1) -f BL.subnets }
	redirect location /bm if { hdr_ip(X-Forwarded-For,-1) -f BM.subnets }
	redirect location /bn if { hdr_ip(X-Forwarded-For,-1) -f BN.subnets }
	redirect location /bo if { hdr_ip(X-Forwarded-For,-1) -f BO.subnets }
	redirect location /bq if { hdr_ip(X-Forwarded-For,-1) -f BQ.subnets }
	redirect location /br if { hdr_ip(X-Forwarded-For,-1) -f BR.subnets }
	redirect location /bs if { hdr_ip(X-Forwarded-For,-1) -f BS.subnets }
	redirect location /bt if { hdr_ip(X-Forwarded-For,-1) -f BT.subnets }
	redirect location /bv if { hdr_ip(X-Forwarded-For,-1) -f BV.subnets }
	redirect location /bw if { hdr_ip(X-Forwarded-For,-1) -f BW.subnets }
	redirect location /by if { hdr_ip(X-Forwarded-For,-1) -f BY.subnets }
	redirect location /bz if { hdr_ip(X-Forwarded-For,-1) -f BZ.subnets }
	redirect location /ca if { hdr_ip(X-Forwarded-For,-1) -f CA.subnets }
	redirect location /cd if { hdr_ip(X-Forwarded-For,-1) -f CD.subnets }
	redirect location /cf if { hdr_ip(X-Forwarded-For,-1) -f CF.subnets }
	redirect location /cg if { hdr_ip(X-Forwarded-For,-1) -f CG.subnets }
	redirect location /ch if { hdr_ip(X-Forwarded-For,-1) -f CH.subnets }
	redirect location /ci if { hdr_ip(X-Forwarded-For,-1) -f CI.subnets }
	redirect location /ck if { hdr_ip(X-Forwarded-For,-1) -f CK.subnets }
	redirect location /cl if { hdr_ip(X-Forwarded-For,-1) -f CL.subnets }
	redirect location /cm if { hdr_ip(X-Forwarded-For,-1) -f CM.subnets }
	redirect location /cn if { hdr_ip(X-Forwarded-For,-1) -f CN.subnets }
	redirect location /co if { hdr_ip(X-Forwarded-For,-1) -f CO.subnets }
	redirect location /cr if { hdr_ip(X-Forwarded-For,-1) -f CR.subnets }
	redirect location /cu if { hdr_ip(X-Forwarded-For,-1) -f CU.subnets }
	redirect location /cv if { hdr_ip(X-Forwarded-For,-1) -f CV.subnets }
	redirect location /cw if { hdr_ip(X-Forwarded-For,-1) -f CW.subnets }
	redirect location /cy if { hdr_ip(X-Forwarded-For,-1) -f CY.subnets }
	redirect location /cz if { hdr_ip(X-Forwarded-For,-1) -f CZ.subnets }
	redirect location /de if { hdr_ip(X-Forwarded-For,-1) -f DE.subnets }
	redirect location /dj if { hdr_ip(X-Forwarded-For,-1) -f DJ.subnets }
	redirect location /dk if { hdr_ip(X-Forwarded-For,-1) -f DK.subnets }
	redirect location /dm if { hdr_ip(X-Forwarded-For,-1) -f DM.subnets }
	redirect location /do if { hdr_ip(X-Forwarded-For,-1) -f DO.subnets }
	redirect location /dz if { hdr_ip(X-Forwarded-For,-1) -f DZ.subnets }
	redirect location /ec if { hdr_ip(X-Forwarded-For,-1) -f EC.subnets }
	redirect location /ee if { hdr_ip(X-Forwarded-For,-1) -f EE.subnets }
	redirect location /eg if { hdr_ip(X-Forwarded-For,-1) -f EG.subnets }
	redirect location /er if { hdr_ip(X-Forwarded-For,-1) -f ER.subnets }
	redirect location /es if { hdr_ip(X-Forwarded-For,-1) -f ES.subnets }
	redirect location /et if { hdr_ip(X-Forwarded-For,-1) -f ET.subnets }
	redirect location /eu if { hdr_ip(X-Forwarded-For,-1) -f EU.subnets }
	redirect location /fi if { hdr_ip(X-Forwarded-For,-1) -f FI.subnets }
	redirect location /fj if { hdr_ip(X-Forwarded-For,-1) -f FJ.subnets }
	redirect location /fk if { hdr_ip(X-Forwarded-For,-1) -f FK.subnets }
	redirect location /fm if { hdr_ip(X-Forwarded-For,-1) -f FM.subnets }
	redirect location /fo if { hdr_ip(X-Forwarded-For,-1) -f FO.subnets }
	redirect location /fr if { hdr_ip(X-Forwarded-For,-1) -f FR.subnets }
	redirect location /ga if { hdr_ip(X-Forwarded-For,-1) -f GA.subnets }
	redirect location /gb if { hdr_ip(X-Forwarded-For,-1) -f GB.subnets }
	redirect location /gd if { hdr_ip(X-Forwarded-For,-1) -f GD.subnets }
	redirect location /ge if { hdr_ip(X-Forwarded-For,-1) -f GE.subnets }
	redirect location /gf if { hdr_ip(X-Forwarded-For,-1) -f GF.subnets }
	redirect location /gg if { hdr_ip(X-Forwarded-For,-1) -f GG.subnets }
	redirect location /gh if { hdr_ip(X-Forwarded-For,-1) -f GH.subnets }
	redirect location /gi if { hdr_ip(X-Forwarded-For,-1) -f GI.subnets }
	redirect location /gl if { hdr_ip(X-Forwarded-For,-1) -f GL.subnets }
	redirect location /gm if { hdr_ip(X-Forwarded-For,-1) -f GM.subnets }
	redirect location /gn if { hdr_ip(X-Forwarded-For,-1) -f GN.subnets }
	redirect location /gp if { hdr_ip(X-Forwarded-For,-1) -f GP.subnets }
	redirect location /gq if { hdr_ip(X-Forwarded-For,-1) -f GQ.subnets }
	redirect location /gr if { hdr_ip(X-Forwarded-For,-1) -f GR.subnets }
	redirect location /gt if { hdr_ip(X-Forwarded-For,-1) -f GT.subnets }
	redirect location /gu if { hdr_ip(X-Forwarded-For,-1) -f GU.subnets }
	redirect location /gw if { hdr_ip(X-Forwarded-For,-1) -f GW.subnets }
	redirect location /gy if { hdr_ip(X-Forwarded-For,-1) -f GY.subnets }
	redirect location /hk if { hdr_ip(X-Forwarded-For,-1) -f HK.subnets }
	redirect location /hm if { hdr_ip(X-Forwarded-For,-1) -f HM.subnets }
	redirect location /hn if { hdr_ip(X-Forwarded-For,-1) -f HN.subnets }
	redirect location /hr if { hdr_ip(X-Forwarded-For,-1) -f HR.subnets }
	redirect location /ht if { hdr_ip(X-Forwarded-For,-1) -f HT.subnets }
	redirect location /hu if { hdr_ip(X-Forwarded-For,-1) -f HU.subnets }
	redirect location /id if { hdr_ip(X-Forwarded-For,-1) -f ID.subnets }
	redirect location /ie if { hdr_ip(X-Forwarded-For,-1) -f IE.subnets }
	redirect location /il if { hdr_ip(X-Forwarded-For,-1) -f IL.subnets }
	redirect location /im if { hdr_ip(X-Forwarded-For,-1) -f IM.subnets }
	redirect location /in if { hdr_ip(X-Forwarded-For,-1) -f IN.subnets }
	redirect location /io if { hdr_ip(X-Forwarded-For,-1) -f IO.subnets }
	redirect location /iq if { hdr_ip(X-Forwarded-For,-1) -f IQ.subnets }
	redirect location /ir if { hdr_ip(X-Forwarded-For,-1) -f IR.subnets }
	redirect location /is if { hdr_ip(X-Forwarded-For,-1) -f IS.subnets }
	redirect location /it if { hdr_ip(X-Forwarded-For,-1) -f IT.subnets }
	redirect location /je if { hdr_ip(X-Forwarded-For,-1) -f JE.subnets }
	redirect location /jm if { hdr_ip(X-Forwarded-For,-1) -f JM.subnets }
	redirect location /jo if { hdr_ip(X-Forwarded-For,-1) -f JO.subnets }
	redirect location /jp if { hdr_ip(X-Forwarded-For,-1) -f JP.subnets }
	redirect location /ke if { hdr_ip(X-Forwarded-For,-1) -f KE.subnets }
	redirect location /kg if { hdr_ip(X-Forwarded-For,-1) -f KG.subnets }
	redirect location /kh if { hdr_ip(X-Forwarded-For,-1) -f KH.subnets }
	redirect location /ki if { hdr_ip(X-Forwarded-For,-1) -f KI.subnets }
	redirect location /km if { hdr_ip(X-Forwarded-For,-1) -f KM.subnets }
	redirect location /kn if { hdr_ip(X-Forwarded-For,-1) -f KN.subnets }
	redirect location /kp if { hdr_ip(X-Forwarded-For,-1) -f KP.subnets }
	redirect location /kr if { hdr_ip(X-Forwarded-For,-1) -f KR.subnets }
	redirect location /kw if { hdr_ip(X-Forwarded-For,-1) -f KW.subnets }
	redirect location /ky if { hdr_ip(X-Forwarded-For,-1) -f KY.subnets }
	redirect location /kz if { hdr_ip(X-Forwarded-For,-1) -f KZ.subnets }
	redirect location /la if { hdr_ip(X-Forwarded-For,-1) -f LA.subnets }
	redirect location /lb if { hdr_ip(X-Forwarded-For,-1) -f LB.subnets }
	redirect location /lc if { hdr_ip(X-Forwarded-For,-1) -f LC.subnets }
	redirect location /li if { hdr_ip(X-Forwarded-For,-1) -f LI.subnets }
	redirect location /lk if { hdr_ip(X-Forwarded-For,-1) -f LK.subnets }
	redirect location /lr if { hdr_ip(X-Forwarded-For,-1) -f LR.subnets }
	redirect location /ls if { hdr_ip(X-Forwarded-For,-1) -f LS.subnets }
	redirect location /lt if { hdr_ip(X-Forwarded-For,-1) -f LT.subnets }
	redirect location /lu if { hdr_ip(X-Forwarded-For,-1) -f LU.subnets }
	redirect location /lv if { hdr_ip(X-Forwarded-For,-1) -f LV.subnets }
	redirect location /ly if { hdr_ip(X-Forwarded-For,-1) -f LY.subnets }
	redirect location /ma if { hdr_ip(X-Forwarded-For,-1) -f MA.subnets }
	redirect location /mc if { hdr_ip(X-Forwarded-For,-1) -f MC.subnets }
	redirect location /md if { hdr_ip(X-Forwarded-For,-1) -f MD.subnets }
	redirect location /me if { hdr_ip(X-Forwarded-For,-1) -f ME.subnets }
	redirect location /mf if { hdr_ip(X-Forwarded-For,-1) -f MF.subnets }
	redirect location /mg if { hdr_ip(X-Forwarded-For,-1) -f MG.subnets }
	redirect location /mh if { hdr_ip(X-Forwarded-For,-1) -f MH.subnets }
	redirect location /mk if { hdr_ip(X-Forwarded-For,-1) -f MK.subnets }
	redirect location /ml if { hdr_ip(X-Forwarded-For,-1) -f ML.subnets }
	redirect location /mm if { hdr_ip(X-Forwarded-For,-1) -f MM.subnets }
	redirect location /mn if { hdr_ip(X-Forwarded-For,-1) -f MN.subnets }
	redirect location /mo if { hdr_ip(X-Forwarded-For,-1) -f MO.subnets }
	redirect location /mp if { hdr_ip(X-Forwarded-For,-1) -f MP.subnets }
	redirect location /mq if { hdr_ip(X-Forwarded-For,-1) -f MQ.subnets }
	redirect location /mr if { hdr_ip(X-Forwarded-For,-1) -f MR.subnets }
	redirect location /ms if { hdr_ip(X-Forwarded-For,-1) -f MS.subnets }
	redirect location /mt if { hdr_ip(X-Forwarded-For,-1) -f MT.subnets }
	redirect location /mu if { hdr_ip(X-Forwarded-For,-1) -f MU.subnets }
	redirect location /mv if { hdr_ip(X-Forwarded-For,-1) -f MV.subnets }
	redirect location /mw if { hdr_ip(X-Forwarded-For,-1) -f MW.subnets }
	redirect location /mx if { hdr_ip(X-Forwarded-For,-1) -f MX.subnets }
	redirect location /my if { hdr_ip(X-Forwarded-For,-1) -f MY.subnets }
	redirect location /mz if { hdr_ip(X-Forwarded-For,-1) -f MZ.subnets }
	redirect location /na if { hdr_ip(X-Forwarded-For,-1) -f NA.subnets }
	redirect location /nc if { hdr_ip(X-Forwarded-For,-1) -f NC.subnets }
	redirect location /ne if { hdr_ip(X-Forwarded-For,-1) -f NE.subnets }
	redirect location /nf if { hdr_ip(X-Forwarded-For,-1) -f NF.subnets }
	redirect location /ng if { hdr_ip(X-Forwarded-For,-1) -f NG.subnets }
	redirect location /ni if { hdr_ip(X-Forwarded-For,-1) -f NI.subnets }
	redirect location /nl if { hdr_ip(X-Forwarded-For,-1) -f NL.subnets }
	redirect location /no if { hdr_ip(X-Forwarded-For,-1) -f NO.subnets }
	redirect location /np if { hdr_ip(X-Forwarded-For,-1) -f NP.subnets }
	redirect location /nr if { hdr_ip(X-Forwarded-For,-1) -f NR.subnets }
	redirect location /nu if { hdr_ip(X-Forwarded-For,-1) -f NU.subnets }
	redirect location /nz if { hdr_ip(X-Forwarded-For,-1) -f NZ.subnets }
	redirect location /om if { hdr_ip(X-Forwarded-For,-1) -f OM.subnets }
	redirect location /pa if { hdr_ip(X-Forwarded-For,-1) -f PA.subnets }
	redirect location /pe if { hdr_ip(X-Forwarded-For,-1) -f PE.subnets }
	redirect location /pf if { hdr_ip(X-Forwarded-For,-1) -f PF.subnets }
	redirect location /pg if { hdr_ip(X-Forwarded-For,-1) -f PG.subnets }
	redirect location /ph if { hdr_ip(X-Forwarded-For,-1) -f PH.subnets }
	redirect location /pk if { hdr_ip(X-Forwarded-For,-1) -f PK.subnets }
	redirect location /pl if { hdr_ip(X-Forwarded-For,-1) -f PL.subnets }
	redirect location /pm if { hdr_ip(X-Forwarded-For,-1) -f PM.subnets }
	redirect location /pr if { hdr_ip(X-Forwarded-For,-1) -f PR.subnets }
	redirect location /ps if { hdr_ip(X-Forwarded-For,-1) -f PS.subnets }
	redirect location /pt if { hdr_ip(X-Forwarded-For,-1) -f PT.subnets }
	redirect location /pw if { hdr_ip(X-Forwarded-For,-1) -f PW.subnets }
	redirect location /py if { hdr_ip(X-Forwarded-For,-1) -f PY.subnets }
	redirect location /qa if { hdr_ip(X-Forwarded-For,-1) -f QA.subnets }
	redirect location /re if { hdr_ip(X-Forwarded-For,-1) -f RE.subnets }
	redirect location /ro if { hdr_ip(X-Forwarded-For,-1) -f RO.subnets }
	redirect location /rs if { hdr_ip(X-Forwarded-For,-1) -f RS.subnets }
	redirect location /ru if { hdr_ip(X-Forwarded-For,-1) -f RU.subnets }
	redirect location /rw if { hdr_ip(X-Forwarded-For,-1) -f RW.subnets }
	redirect location /sa if { hdr_ip(X-Forwarded-For,-1) -f SA.subnets }
	redirect location /sb if { hdr_ip(X-Forwarded-For,-1) -f SB.subnets }
	redirect location /sc if { hdr_ip(X-Forwarded-For,-1) -f SC.subnets }
	redirect location /sd if { hdr_ip(X-Forwarded-For,-1) -f SD.subnets }
	redirect location /se if { hdr_ip(X-Forwarded-For,-1) -f SE.subnets }
	redirect location /sg if { hdr_ip(X-Forwarded-For,-1) -f SG.subnets }
	redirect location /sh if { hdr_ip(X-Forwarded-For,-1) -f SH.subnets }
	redirect location /si if { hdr_ip(X-Forwarded-For,-1) -f SI.subnets }
	redirect location /sk if { hdr_ip(X-Forwarded-For,-1) -f SK.subnets }
	redirect location /sl if { hdr_ip(X-Forwarded-For,-1) -f SL.subnets }
	redirect location /sm if { hdr_ip(X-Forwarded-For,-1) -f SM.subnets }
	redirect location /sn if { hdr_ip(X-Forwarded-For,-1) -f SN.subnets }
	redirect location /so if { hdr_ip(X-Forwarded-For,-1) -f SO.subnets }
	redirect location /sr if { hdr_ip(X-Forwarded-For,-1) -f SR.subnets }
	redirect location /st if { hdr_ip(X-Forwarded-For,-1) -f ST.subnets }
	redirect location /sv if { hdr_ip(X-Forwarded-For,-1) -f SV.subnets }
	redirect location /sy if { hdr_ip(X-Forwarded-For,-1) -f SY.subnets }
	redirect location /sz if { hdr_ip(X-Forwarded-For,-1) -f SZ.subnets }
	redirect location /tc if { hdr_ip(X-Forwarded-For,-1) -f TC.subnets }
	redirect location /td if { hdr_ip(X-Forwarded-For,-1) -f TD.subnets }
	redirect location /tg if { hdr_ip(X-Forwarded-For,-1) -f TG.subnets }
	redirect location /th if { hdr_ip(X-Forwarded-For,-1) -f TH.subnets }
	redirect location /tj if { hdr_ip(X-Forwarded-For,-1) -f TJ.subnets }
	redirect location /tk if { hdr_ip(X-Forwarded-For,-1) -f TK.subnets }
	redirect location /tl if { hdr_ip(X-Forwarded-For,-1) -f TL.subnets }
	redirect location /tm if { hdr_ip(X-Forwarded-For,-1) -f TM.subnets }
	redirect location /tn if { hdr_ip(X-Forwarded-For,-1) -f TN.subnets }
	redirect location /to if { hdr_ip(X-Forwarded-For,-1) -f TO.subnets }
	redirect location /tr if { hdr_ip(X-Forwarded-For,-1) -f TR.subnets }
	redirect location /tt if { hdr_ip(X-Forwarded-For,-1) -f TT.subnets }
	redirect location /tv if { hdr_ip(X-Forwarded-For,-1) -f TV.subnets }
	redirect location /tw if { hdr_ip(X-Forwarded-For,-1) -f TW.subnets }
	redirect location /tz if { hdr_ip(X-Forwarded-For,-1) -f TZ.subnets }
	redirect location /ua if { hdr_ip(X-Forwarded-For,-1) -f UA.subnets }
	redirect location /ug if { hdr_ip(X-Forwarded-For,-1) -f UG.subnets }
	redirect location /um if { hdr_ip(X-Forwarded-For,-1) -f UM.subnets }
	redirect location /us if { hdr_ip(X-Forwarded-For,-1) -f US.subnets }
	redirect location /uy if { hdr_ip(X-Forwarded-For,-1) -f UY.subnets }
	redirect location /uz if { hdr_ip(X-Forwarded-For,-1) -f UZ.subnets }
	redirect location /va if { hdr_ip(X-Forwarded-For,-1) -f VA.subnets }
	redirect location /vc if { hdr_ip(X-Forwarded-For,-1) -f VC.subnets }
	redirect location /ve if { hdr_ip(X-Forwarded-For,-1) -f VE.subnets }
	redirect location /vg if { hdr_ip(X-Forwarded-For,-1) -f VG.subnets }
	redirect location /vi if { hdr_ip(X-Forwarded-For,-1) -f VI.subnets }
	redirect location /vn if { hdr_ip(X-Forwarded-For,-1) -f VN.subnets }
	redirect location /vu if { hdr_ip(X-Forwarded-For,-1) -f VU.subnets }
	redirect location /wf if { hdr_ip(X-Forwarded-For,-1) -f WF.subnets }
	redirect location /ws if { hdr_ip(X-Forwarded-For,-1) -f WS.subnets }
	redirect location /ye if { hdr_ip(X-Forwarded-For,-1) -f YE.subnets }
	redirect location /yt if { hdr_ip(X-Forwarded-For,-1) -f YT.subnets }
	redirect location /za if { hdr_ip(X-Forwarded-For,-1) -f ZA.subnets }
	redirect location /zm if { hdr_ip(X-Forwarded-For,-1) -f ZM.subnets }
	redirect location /zw if { hdr_ip(X-Forwarded-For,-1) -f ZW.subnets }

listen geolocate-redirects :9002
	geolocate hdr_ip(X-Forwarded-For,-1) subnets.dict
	redirect location /a1 if { geoloc a1 }
	redirect location /a2 if { geoloc a2 }
	redirect location /ad if { geoloc ad }
	redirect location /ae if { geoloc ae }
	redirect location /af if { geoloc af }
	redirect location /ag if { geoloc ag }
	redirect location /ai if { geoloc ai }
	redirect location /al if { geoloc al }
	redirect location /am if { geoloc am }
	redirect location /ao if { geoloc ao }
	redirect location /ap if { geoloc ap }
	redirect location /aq if { geoloc aq }
	redirect location /ar if { geoloc ar }
	redirect location /as if { geoloc as }
	redirect location /at if { geoloc at }
	redirect location /au if { geoloc au }
	redirect location /aw if { geoloc aw }
	redirect location /ax if { geoloc ax }
	redirect location /az if { geoloc az }
	redirect location /ba if { geoloc ba }
	redirect location /bb if { geoloc bb }
	redirect location /bd if { geoloc bd }
	redirect location /be if { geoloc be }
	redirect location /bf if { geoloc bf }
	redirect location /bg if { geoloc bg }
	redirect location /bh if { geoloc bh }
	redirect location /bi if { geoloc bi }
	redirect location /bj if { geoloc bj }
	redirect location /bl if { geoloc bl }
	redirect location /bm if { geoloc bm }
	redirect location /bn if { geoloc bn }
	redirect location /bo if { geoloc bo }
	redirect location /bq if { geoloc bq }
	redirect location /br if { geoloc br }
	redirect location /bs if { geoloc bs }
	redirect location /bt if { geoloc bt }
	redirect location /bv if { geoloc bv }
	redirect location /bw if { geoloc bw }
	redirect location /by if { geoloc by }
	redirect location /bz if { geoloc bz }
	redirect location /ca if { geoloc ca }
	redirect location /cd if { geoloc cd }
	redirect location /cf if { geoloc cf }
	redirect location /cg if { geoloc cg }
	redirect location /ch if { geoloc ch }
	redirect location /ci if { geoloc ci }
	redirect location /ck if { geoloc ck }
	redirect location /cl if { geoloc cl }
	redirect location /cm if { geoloc cm }
	redirect location /cn if { geoloc cn }
	redirect location /co if { geoloc co }
	redirect location /cr if { geoloc cr }
	redirect location /cu if { geoloc cu }
	redirect location /cv if { geoloc cv }
	redirect location /cw if { geoloc cw }
	redirect location /cy if { geoloc cy }
	redirect location /cz if { geoloc cz }
	redirect location /de if { geoloc de }
	redirect location /dj if { geoloc dj }
	redirect location /dk if { geoloc dk }
	redirect location /dm if { geoloc dm }
	redirect location /do if { geoloc do }
	redirect location /dz if { geoloc dz }
	redirect location /ec if { geoloc ec }
	redirect location /ee if { geoloc ee }
	redirect location /eg if { geoloc eg }
	redirect location /er if { geoloc er }
	redirect location /es if { geoloc es }
	redirect location /et if { geoloc et }
	redirect location /eu if { geoloc eu }
	redirect location /fi if { geoloc fi }
	redirect location /fj if { geoloc fj }
	redirect location /fk if { geoloc fk }
	redirect location /fm if { geoloc fm }
	redirect location /fo if { geoloc fo }
	redirect location /fr if { geoloc fr }
	redirect location /ga if { geoloc ga }
	redirect location /gb if { geoloc gb }
	redirect location /gd if { geoloc gd }
	redirect location /ge if { geoloc ge }
	redirect location /gf if { geoloc gf }
	redirect location /gg if { geoloc gg }
	redirect location /gh if { geoloc gh }
	redirect location /gi if { geoloc gi }
	redirect location /gl if { geoloc gl }
	redirect location /gm if { geoloc gm }
	redirect location /gn if { geoloc gn }
	redirect location /gp if { geoloc gp }
	redirect location /gq if { geoloc gq }
	redirect location /gr if { geoloc gr }
	redirect location /gt if { geoloc gt }
	redirect location /gu if { geoloc gu }
	redirect location /gw if { geoloc gw }
	redirect location /gy if { geoloc gy }
	redirect location /hk if { geoloc hk }
	redirect location /hm if { geoloc hm }
	redirect location /hn if { geoloc hn }
	redirect location /hr if { geoloc hr }
	redirect location /ht if { geoloc ht }
	redirect location /hu if { geoloc hu }
	redirect location /id if { geoloc id }
	redirect location /ie if { geoloc ie }
	redirect location /il if { geoloc il }
	redirect location /im if { geoloc im }
	redirect location /in if { geoloc in }
	redirect location /io if { geoloc io }
	redirect location /iq if { geoloc iq }
	redirect location /ir if { geoloc ir }
	redirect location /is if { geoloc is }
	redirect location /it if { geoloc it }
	redirect location /je if { geoloc je }
	redirect location /jm if { geoloc jm }
	redirect location /jo if { geoloc jo }
	redirect location /jp if { geoloc jp }
	redirect location /ke if { geoloc ke }
	redirect location /kg if { geoloc kg }
	redirect location /kh if { geoloc kh }
	redirect location /ki if { geoloc ki }
	redirect location /km if { geoloc km }
	redirect location /kn if { geoloc kn }
	redirect location /kp if { geoloc kp }
	redirect location /kr if { geoloc kr }
	redirect location /kw if { geoloc kw }
	redirect location /ky if { geoloc ky }
	redirect location /kz if { geoloc kz }
	redirect location /la if { geoloc la }
	redirect location /lb if { geoloc lb }
	redirect location /lc if { geoloc lc }
	redirect location /li if { geoloc li }
	redirect location /lk if { geoloc lk }
	redirect location /lr if { geoloc lr }
	redirect location /ls if { geoloc ls }
	redirect location /lt if { geoloc lt }
	redirect location /lu if { geoloc lu }
	redirect location /lv if { geoloc lv }
	redirect location /ly if { geoloc ly }
	redirect location /ma if { geoloc ma }
	redirect location /mc if { geoloc mc }
	redirect location /md if { geoloc md }
	redirect location /me if { geoloc me }
	redirect location /mf if { geoloc mf }
	redirect location /mg if { geoloc mg }
	redirect location /mh if { geoloc mh }
	redirect location /mk if { geoloc mk }
	redirect location /ml if { geoloc ml }
	redirect location /mm if { geoloc mm }
	redirect location /mn if { geoloc mn }
	redirect location /mo if { geoloc mo }
	redirect location /mp if { geoloc mp }
	redirect location /mq if { geoloc mq }
	redirect location /mr if { geoloc mr }
	redirect location /ms if { geoloc ms }
	redirect location /mt if { geoloc mt }
	redirect location /mu if { geoloc mu }
	redirect location /mv if { geoloc mv }
	redirect location /mw if { geoloc mw }
	redirect location /mx if { geoloc mx }
	redirect location /my if { geoloc my }
	redirect location /mz if { geoloc mz }
	redirect location /na if { geoloc na }
	redirect location /nc if { geoloc nc }
	redirect location /ne if { geoloc ne }
	redirect location /nf if { geoloc nf }
	redirect location /ng if { geoloc ng }
	redirect location /ni if { geoloc ni }
	redirect location /nl if { geoloc nl }
	redirect location /no if { geoloc no }
	redirect location /np if { geoloc np }
	redirect location /nr if { geoloc nr }
	redirect location /nu if { geoloc nu }
	redirect location /nz if { geoloc nz }
	redirect location /om if { geoloc om }
	redirect location /pa if { geoloc pa }
	redirect location /pe if { geoloc pe }
	redirect location /pf if { geoloc pf }
	redirect location /pg if { geoloc pg }
	redirect location /ph if { geoloc ph }
	redirect location /pk if { geoloc pk }
	redirect location /pl if { geoloc pl }
	redirect location /pm if { geoloc pm }
	redirect location /pr if { geoloc pr }
	redirect location /ps if { geoloc ps }
	redirect location /pt if { geoloc pt }
	redirect location /pw if { geoloc pw }
	redirect location /py if { geoloc py }
	redirect location /qa if { geoloc qa }
	redirect location /re if { geoloc re }
	redirect location /ro if { geoloc ro }
	redirect location /rs if { geoloc rs }
	redirect location /ru if { geoloc ru }
	redirect location /rw if { geoloc rw }
	redirect location /sa if { geoloc sa }
	redirect location /sb if { geoloc sb }
	redirect location /sc if { geoloc sc }
	redirect location /sd if { geoloc sd }
	redirect location /se if { geoloc se }
	redirect location /sg if { geoloc sg }
	redirect location /sh if { geoloc sh }
	redirect location /si if { geoloc si }
	redirect location /sk if { geoloc sk }
	redirect location /sl if { geoloc sl }
	redirect location /sm if { geoloc sm }
	redirect location /sn if { geoloc sn }
	redirect location /so if { geoloc so }
	redirect location /sr if { geoloc sr }
	redirect location /st if { geoloc st }
	redirect location /sv if { geoloc sv }
	redirect location /sy if { geoloc sy }
	redirect location /sz if { geoloc sz }
	redirect location /tc if { geoloc tc }
	redirect location /td if { geoloc td }
	redirect location /tg if { geoloc tg }
	redirect location /th if { geoloc th }
	redirect location /tj if { geoloc tj }
	redirect location /tk if { geoloc tk }
	redirect location /tl if { geoloc tl }
	redirect location /tm if { geoloc tm }
	redirect location /tn if { geoloc tn }
	redirect location /to if { geoloc to }
	redirect location /tr if { geoloc tr }
	redirect location /tt if { geoloc tt }
	redirect location /tv if { geoloc tv }
	redirect location /tw if { geoloc tw }
	redirect location /tz if { geoloc tz }
	redirect location /ua if { geoloc ua }
	redirect location /ug if { geoloc ug }
	redirect location /um if { geoloc um }
	redirect location /us if { geoloc us }
	redirect location /uy if { geoloc uy }
	redirect location /uz if { geoloc uz }
	redirect location /va if { geoloc va }
	redirect location /vc if { geoloc vc }
	redirect location /ve if { geoloc ve }
	redirect location /vg if { geoloc vg }
	redirect location /vi if { geoloc vi }
	redirect location /vn if { geoloc vn }
	redirect location /vu if { geoloc vu }
	redirect location /wf if { geoloc wf }
	redirect location /ws if { geoloc ws }
	redirect location /ye if { geoloc ye }
	redirect location /yt if { geoloc yt }
	redirect location /za if { geoloc za }
	redirect location /zm if { geoloc zm }
	redirect location /zw if { geoloc zw }

listen geolocate-tokenized-redirect :9003
	geolocate hdr_ip(X-Forwarded-For,-1) subnets.dict if { path / }
	redirect location /${geoloc} if { geoloc * }
